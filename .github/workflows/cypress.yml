name: Cypress Tests
on: [push]

jobs:
    cypress-run:
        runs-on: ubuntu-latest

        services:
            mongo:
                image: mongo
                options: >-
                    --health-cmd mongo
                    --health-interval 10s
                    --health-timeout 5s
                    --health-retries 5
                ports:
                    - 27017:27017
        steps:
            - name: Checkout
              uses: actions/checkout@v2

            - name: Cypress run
              uses: cypress-io/github-action@v5
              with:
                  browser: chrome
                  start: npm start
              env:
                  DATABASE_URL: mongodb://127.0.0.1
