# Statikus kódellenőrzés

Statikus kódellenőrzésre a JavaScript világában az ESLint könyvtárat szokás használni. Ez egy nyílt forráskódú csomag, amely megtalálja az alapvető hibákat az alkalmazásodban. Telepíteni, mint minden JS csomagot npm-mel kellett, majd ezután a `.eslintrc.json` fájlban lehet konfigurálni. Itt lehet állítani, hogy milyen szabályoknak szeretnénk megfelelni, illetve hogy milyen környezetekben fog futni az appunk. Nekünk megfelelnek az alapértelmezett szabályok, ezek tartalmazzák a legjellemzőbb JS code-smell-eket. A környezeteknél meg kell adni a `browser`-t a `static/route.js` fájl miatt, ami egy böngészőben futó JavaScript fájl, különben ebben a fájlban sok hibát jelez, hogy `document is not defined`, pedig ez az objektum egy böngészőn belül mindig elérhető. Ugyanígy a `mocha` környezetre is szükségünk van a tesztek miatt, enélkül a `describe` és `it` függvények jeleznének hibát.

A konfiguráció beállítása után a VS Code aláhúzza a hibákat, de az `npm run lint:check` paranccsal listázhatjuk is az összes hibát. Ezeket átnézve azt láthatjuk, hogy sok helyen vannak felhasználatlan paraméterek függvényekben, illetve felesleges pontosvesszők. Az előbbi azonban nem mindenhol valós, mert például azt nem tudja érzékelni, hogy a korábban említett `static/route.js` fájlban definiált függvények valójában használva vannak a `route.ejs` template alapján generált html fájlokban. Ezért ezt a szabályt kikapcsoljuk az adott fájlra, amihez ezt a sort kell beilleszteni a fájl elejére:
```javascript
/* eslint-disable no-unused-vars */
```
Ez a Javasciprt számára egy komment, de az ESLint ettől a `no-unused-vars` szabályt figyelmen kívül hagyja ebben a fájlban. Egyes hibákat automatikusan javítani is tudunk a `npm run lint:fix` paranccsal. Ha lefuttatjuk, látjuk, hogy a felesleges pontosvesszőket törli, a fel nem használt paramétereket viszont nem.

Az ESLint mellett behúztam a Prettier könyvtárat is, ami egy kód formázást segítő csomag. Az ESLinthez hasonlóan telepíthető és konfigurálható, azonban ez nem a logikai hibákat keresi, hanem a formaiakat, mint például az indentálás, pontosvesszők, idézőjelek konzisztens használata. Az `npm run format:write` paranccsal fixelhető minden probléma, a változásokból látható, hogy a projektben például az aposztróf és az idéző jel össze-vissza volt használva, pedig JavaScript-ben egyenértékűek, ezért érdemes mindig ugyanazt használni. A `.prettierignore` fájlban meg lehet adni, hogy milyen típusú fájlokat nem ellenőrizzen és figyeljen a Prettier. Itt megadtam a JSON-t és a Markdown-t, hogy szigorúan csak a forráskódot formázza.